<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../static/css/styles.css">
    <title>Dishes</title>
</head>
<body>
    <div class="wrapper">
         <nav>
            <h2>Foodies</h2>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/restaurants">Restaurants</a></li>
                <li><a href="/dishes">Dishes</a></li>
                <li><a href="/reservations">Reservations</a></li>
                <li><a href="/dishes/add">Add dishes</a></li>
            </ul>
            <ul>
                <button>Sign in</button>
            </ul>
        </nav>  
        <main>
            <div class="filters">
                <form method="get" action="/dishes" id="filterForm">
                    <label for="cities">Filter by City:</label>
                    <select name="city" id="cities" multiple>
                        {% for city in all_cities %}
                            <option value="{{ city }}" {% if city in selected_cities %}selected{% endif %}>{{ city }}</option>
                        {% endfor %}
                    </select>

                    <input type="hidden" name="order" value="{{ order }}">
                    <button type="submit">Apply Filters</button>
                </form>

                <form method="get" action="/dishes" style="display:inline;">
                    {% for city in selected_cities %}
                        <input type="hidden" name="city" value="{{ city }}">
                    {% endfor %}
                    <input type="hidden" name="order_by_orders" value="{% if order_by_orders == 'desc' %}asc{% else %}desc{% endif %}">
                    <button type="submit">
                        Sort by Orders {% if order_by_orders == 'desc' %}↓{% else %}↑{% endif %}
                    </button>
                </form>
            </div>
            {% if city %}
            <h2 class="dishes-header">Dishes in {{ city }}</h2>
            {% else %}
            <h2 class="dishes-header">All Dishes</h2>
            {% endif %}
            <div class="trending-dishes">
                <div class="dishes-list">
                    {% for dish in dishes %}
                    <div class="dish-item">
                        <div class="dish-item-bottom">
                            <h3>{{ dish[1] }}</h3>
                            <h3><span class="from">FROM </span>{{ dish[3] }}</h3>
                            <p>Ordered <span>{{ dish[2] }}</span> times</p>
                            <div class="location">
                                <p><span> {{ dish[4] }}, </span> <span> {{ dish[5] }} </span></p>
                            </div>
                        </div>
                        <a href="{{ url_for('remove_menu_item', item_id=dish[0]) }}">Delete </a>
                    </div>
                    {% endfor %}
                </div>
                
            </div>

        </main>
         <footer>
            <p>© 2025 Foodies. All rights reserved.</p>
        </footer>
    </div>
</body>
</html>